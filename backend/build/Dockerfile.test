FROM golang:1.16.4-alpine3.13 as builder

WORKDIR /go/src/github.com/htchan/BookSpider

COPY ./src .

RUN apk add gcc musl-dev libc-dev
RUN go mod download

CMD [ 'go test', \
	'github.com/htchan/BookSpider/helper', \
	'github.com/htchan/BookSpider/model', \
	'github.com/htchan/BookSpider/public -v' ]
